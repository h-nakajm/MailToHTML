<html>

<head>
	<title>Test page</title>
	<style type="text/css">
		body {
			margin: 0 0 200 0;
		}
	</style>

</head>

<script type="text/javascript">
	function categorize() {

		var a = "";

		// 選択されているボタンを取得

		for (var i = 0; i < document.form1.example.length; i++) {

			if (document.form1.elements[i].checked) {

				// 選択されているボタンを取得
				a = document.form1.elements[i].value;

				// Ajaxで送信するデータを作成
				var result = {
					url: document.location.href,
					date: new Date(),
					selected: a
				}

				// 作成したデータをAjaxで送信
				$.ajax({
					url: "http://127.0.0.1:8080/test/result/",
					type: "POST",
					contentType: "application/json",
					data: JSON.stringify(result),
					success: function() {
						window.location.href = "http://sdl.ist.osaka-u.ac.jp";
					},
					error: function(XMLHttpRequest, textStatus, errorThrown) {
						window.alert(textStatus + ": Unable to connect to the server.");
					}
				})

				break;

			} else if (i == document.form1.example.length - 1) {

				window.alert('Please select the button.');

			}

		}


		// // 「OK」時の処理開始 ＋ 確認ダイアログの表示
		//
		// if (window.confirm(a)) {
		//
		// }
		//
		// // 「キャンセル」時の処理開始
		// else {
		//
		// }

	}

	function quit() {

		window.confirm('quit');

	}
</script>

<body>



	</br>
	</br>
	</br>
	Looking at the text of the email, would you categorize it as:</br>
	</br>

	<form name="form1">
		<input type="radio" name="example" value="Personal">Personal</br>
		<input type="radio" name="example" value="Work-related">Work-related</br>
		<input type="radio" name="example" value="Legitimate e-Commerce">Legitimate e-Commerce</br>
		<input type="radio" name="example" value="Spam">Spam</br>
	</form>

	<p>
		<input type="button" value="Categorize this email" onclick="categorize()">
	</p>
	</br>
	Notes:</br>

	<ul>
		<li>You have categolized %d emails so far.</li>
		<li>You are earning a bonus of %d cents after every email you categorize.</li>
		<li>To ensure accuracy of responeses, we will check the accuracy of a random sample of your work.</li>
		<li>There is a limit of 1000 emails per contributer. Please do not attempt more.</li>
		<li>These emails have been released to the public domain. Phone numbers have been removed from these emails, and the company name changed to MegaCorp.</li>
		<li>When you are done categorizing all the emails you wish to complete, click Stop Categorizing Emails and Complete Task below.</li>
	</ul>

	<p align="right">
		<input type="button" value="Stop categorizing emails and complete task" onclick="quit()">
	</p>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js" type="text/javascript"></script>
	<script type="text/javascript" src="./js/jquery.meerkat.1.3.min.js"></script>
	<script type="text/javascript">
		$(function() {
			$('.meerkat').meerkat({
				background: 'url(\'./image/black.png\') repeat-x left top',
				height: '200px',
				width: '100%',
				position: 'bottom',
				//close: '.close-meerkat',
				//dontShowAgain: '.dont-show',
				//animationIn: 'slide',
				//animationSpeed: 500,
				//removeCookie: '.reset'
			}).addClass('pos-bot');
		});
	</script>

	<div style="text-align: center;" class="meerkat">
		<a href="http://sdl.ist.osaka-u.ac.jp" target="_blank">
			<img border="0" width="640" height="200" alt="" src="./image/sample_ad01.png"></a>
	</div>

	<script type="text/javascript">
		$('.meerkat').on({
			'click': function() {
				window.open('http://sdl.ist.osaka-u.ac.jp');
			}
		});
		window.onload = function() {
			$('body').removeAttr('style');
		}
	</script>

</body>

</html>
